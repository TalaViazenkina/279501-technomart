var modal=document.querySelectorAll(".modal"),toBasket=document.querySelector(".modal-adding"),toBasketOpen=document.querySelectorAll(".button-to-basket"),toBasketClose=toBasket.querySelector(".modal-close"),toBasketContinue=toBasket.querySelector(".button-continue"),feedback=document.querySelector(".modal-feedback"),feedbackOpen=document.querySelector(".contacts-feedback"),feedbackClose=feedback.querySelector(".modal-close"),form=feedback.querySelector("form"),fieldEmail=form.querySelector("[name=email]"),fieldMessage=form.querySelector("[name=message]"),map=document.querySelector(".modal-map"),mapOpen=document.querySelector(".contacts-map"),mapClose=map.querySelector(".modal-close"),promoSlider=document.querySelectorAll(".promo-slider-item"),togglePrevious=document.querySelector(".arrow-previous"),toggleNext=document.querySelector(".arrow-next"),promoToggle=document.querySelectorAll(".slider-toggles-round button"),serviceSlider=document.querySelectorAll(".service-slider-item"),serviceToggle=document.querySelectorAll(".services-toggle");feedbackOpen.addEventListener("click",function(e){e.preventDefault(),feedback.classList.add("modal-show")}),feedbackClose.addEventListener("click",function(e){e.preventDefault(),feedback.classList.remove("modal-show"),feedback.classList.remove("modal-error")}),form.addEventListener("submit",function(e){fieldEmail.value&&fieldMessage.value||(e.preventDefault(),feedback.classList.remove("modal-error"),feedback.offsetWidth=feedback.offsetWidth,feedback.classList.add("modal-error"))}),mapOpen.addEventListener("click",function(e){e.preventDefault(),map.classList.add("modal-show")}),mapClose.addEventListener("click",function(e){e.preventDefault(),map.classList.remove("modal-show")});for(var i=0;i<toBasketOpen.length;i++)toBasketOpen[i].addEventListener("click",function(e){e.preventDefault(),toBasket.classList.add("modal-show")});toBasketClose.addEventListener("click",function(e){e.preventDefault(),toBasket.classList.remove("modal-show")}),toBasketContinue.addEventListener("click",function(e){e.preventDefault(),toBasket.classList.remove("modal-show")}),window.addEventListener("keydown",function(e){if(27===e.keyCode)for(var o=0;o<modal.length;o++)modal[o].classList.contains("modal-show")&&(modal[o].classList.remove("modal-show"),feedback.classList.remove("modal-error"))}),togglePrevious.addEventListener("click",function(e){e.preventDefault();for(var o=0,t=0;t<promoSlider.length;t++)promoSlider[t].classList.contains("slider-item-current")&&(promoSlider[t].classList.remove("slider-item-current"),promoToggle[t].classList.remove("toggle-active"),o=t);0===o?(promoSlider[promoSlider.length-1].classList.add("slider-item-current"),promoToggle[promoSlider.length-1].classList.add("toggle-active")):(promoSlider[o-1].classList.add("slider-item-current"),promoToggle[o-1].classList.add("toggle-active"))}),toggleNext.addEventListener("click",function(e){e.preventDefault();for(var o=0,t=0;t<promoSlider.length;t++)promoSlider[t].classList.contains("slider-item-current")&&(promoSlider[t].classList.remove("slider-item-current"),promoToggle[t].classList.remove("toggle-active"),o=t);o===promoSlider.length-1?(promoSlider[0].classList.add("slider-item-current"),promoToggle[0].classList.add("toggle-active")):(promoSlider[o+1].classList.add("slider-item-current"),promoToggle[o+1].classList.add("toggle-active"))});var addToggleClickHandler=function(t,r,l,s){t.addEventListener("click",function(e){for(var o=0;o<l.length;o++)l[o].classList.remove("toggle-active"),s[o].classList.remove("slider-item-current");t.classList.add("toggle-active"),r.classList.add("slider-item-current")})};for(i=0;i<promoToggle.length;i++)addToggleClickHandler(promoToggle[i],promoSlider[i],promoToggle,promoSlider);for(i=0;i<serviceToggle.length;i++)addToggleClickHandler(serviceToggle[i],serviceSlider[i],serviceToggle,serviceSlider);